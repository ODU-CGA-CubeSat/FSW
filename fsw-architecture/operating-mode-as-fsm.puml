@startuml

state AntennaDeployment
      AntennaDeployment : Deploy antenna
      AntennaDeployment : Verify deployment
state SafeHold
      SafeHold : Transmit SeaLion Beacon
state QueryReceiver
      QueryReceiver : Check for GroundCommand
state TelemetrySender
      TelemetrySender : Downlink requested telemetry
state Timer
      Timer : Compute delta_time_beacon
      Timer : Compute delta_time_GPS
      Timer : Compute delta_time_attitude
state MissionMode1
      MissionMode1 : Collect & store Impedence probe data
      MissionMode1 : Collect & store Multi-Spectral sensor data
state MissionMode2
      MissionMode2 : Turn on current supply for 2-minutes to burnwire mechanism
      MissionMode2 : Log DeCS deployment event
      MissionMode2 : Collect & store DeCS strain gauge data
state ProcessDispatcher
      ProcessDispatcher : Perform Scheduled Task
state OrbitPropagator
      OrbitPropagator : Compute Spacecraft Attitude
      OrbitPropagator : Compute Orbit position
      OrbitPropagator : Compute Timetable
state GPSreceiver
      GPSreceiver : Ping GPS

[*] --> AntennaDeployment : EPS & CDS \n Powered on \n 45 min delay
AntennaDeployment --> SafeHold
SafeHold -> QueryReceiver
QueryReceiver --> TelemetrySender : Ground Interrupt?
QueryReceiver -> Timer : No ground Interrupt
TelemetrySender --> Timer
MissionMode1 --> Timer
MissionMode2 --> Timer
GPSreceiver --> OrbitPropagator
OrbitPropagator --> ProcessDispatcher
Timer --> SafeHold : if delta_time_beacon >= 30 mins
Timer --> GPSreceiver : elseif delta_time_GPS >= 10 mins
Timer --> OrbitPropagator : else
ProcessDispatcher --> SafeHold : scheduled for beacon
ProcessDispatcher -> MissionMode1 : scheduled for MM1
ProcessDispatcher --> MissionMode2 : scheduled for MM1
ProcessDispatcher --> Timer : empty runqueue
@enduml
